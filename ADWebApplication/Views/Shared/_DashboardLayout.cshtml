@{
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
}
@*
  Views/Shared/_DashboardLayout.cshtml
  Bootstrap 5 + Bootstrap Icons required
*@
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>@ViewData["Title"] - E-Waste Admin</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="~/css/dashboard.css" asp-append-version="true" />
</head>

<body>
    <div class="dash">
        <!-- SIDEBAR -->
        <aside class="dash-sidebar">
            <div class="dash-brand">
                <div class="brand-icon">
                    <i class="bi bi-box-seam"></i>
                </div>
                <div>
                    <div class="brand-title">E-Waste Admin</div>
                    <div class="brand-sub">Management Portal</div>
                </div>
            </div>

            <nav class="dash-nav">
                <a class="dash-link @(currentController == "AdminDashboard" && currentAction == "Index" ? "active" : "")"
                    asp-controller="AdminDashboard" asp-action="Index">
                    <i class="bi bi-grid"></i>
                    Overview Dashboard
                </a>

                <a class="dash-link @(currentController == "AdminBinPredictions" ? "active" : "")"
                    asp-controller="AdminBinPredictions" asp-action="Index">
                    <i class="bi bi-graph-up"></i>
                    Bin Predictions
                    @await Component.InvokeAsync("HighRiskBinBadge")
                </a>
                
                <a class="dash-link @(currentController == "AdminRoutePlanning" ? "active" : "")"
                    asp-controller="AdminRoutePlanning" asp-action="Index">
                    <i class="bi bi-diagram-3"></i> 
                    Route Planning
                </a>
                
                <a class="dash-link @(currentController == "Admin" && currentAction == "Bins" ? "active" : "")"
                    asp-controller="Admin" asp-action="Bins">
                        <i class="bi bi-graph-up"></i>
                        Bin Management
                    </a>
                <a class="dash-link @(currentController == "Campaign" ? "active" : "")" 
                asp-controller="Campaign" asp-action="Index">
                <i class="bi bi-gift"></i> 
                Incentive Campaigns Management
                </a>
                <a class="dash-link @(currentController == "RewardCatalogue" ? "active" : "")" 
                asp-controller="RewardCatalogue" asp-action="Index">
                <i class="bi bi-gift"></i> 
                Rewards Catalogue Management
                </a>
                <a class="dash-link @(currentController == "Admin" && currentAction != "Bins" ? "active" : "")"
                asp-controller="Admin" asp-action="CollectionOfficerRoster">
                    <i class="bi bi-graph-up"></i>
                    Collection Officers
                </a>


            <div class="dash-user">
                <div class="d-flex align-items-center gap-2">
                    <div class="user-avatar">AM</div>
                    <div class="flex-grow-1">
                        <div class="fw-semibold small">Admin Manager</div>
                        <div class="text-muted small">@User.Identity?.Name</div>
                    </div>
                </div>

                <form method="post" action="@Url.Action("Logout", "EmpAuth")" class="mt-3">
                    @Html.AntiForgeryToken()
                    <button class="btn btn-outline-secondary w-100 btn-sm" type="submit">
                        <i class="bi bi-box-arrow-right me-2"></i> Sign Out
                    </button>
                </form>
            </div>
        </aside>

        <!-- MAIN -->
        <main class="dash-main">

            <!-- PAGE BODY -->
            <section class="dash-content">
                @RenderBody()
            </section>

            <footer class="dash-footer">
                <small class="text-muted">© @DateTime.Now.Year E-Waste Management System. All rights reserved.</small>
            </footer>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    @RenderSection("Scripts", required: false)
    @RenderSection("Styles", required: false)
</body>

</html>